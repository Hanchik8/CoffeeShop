<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin – Categories</title>

  <style>
    body{
      font-family:Inter,Arial;
      margin:0;
      background:#ece8e2;
      color:#2d2d2d;
    }

    .wrap{
      max-width:1100px;
      margin:40px auto;
      padding:32px 40px;
      background:#ffffff;
      border-radius:18px;
      box-shadow:0 12px 32px rgba(0,0,0,0.08);
      border:1px solid #e5ddd4;
    }

    .nav{
      display:flex;
      gap:18px;
      align-items:center;
      margin-bottom:24px;
      padding-bottom:18px;
      border-bottom:1px solid #e5e1dc;
    }
    .nav a{
      color:#8c5a3a;
      font-weight:700;
      text-decoration:none;
      font-size:15px;
      padding:6px 10px;
      border-radius:6px;
      transition:0.2s;
    }
    .nav a:hover{
      background:#f3eee8;
    }
    .nav form{ margin-left:auto }

    h1{
      margin:0 0 22px;
      font-size:26px;
      letter-spacing:0.5px;
      color:#4a3629;
      font-weight:800;
    }

    .form-inline{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:22px;
      background:#faf7f3;
      padding:16px;
      border-radius:12px;
      border:1px solid #e8e2dc;
    }

    input, select{
      padding:10px 12px;
      border:1px solid #d3cbc4;
      border-radius:8px;
      font-size:14px;
      background:#ffffff;
      transition:0.2s;
    }
    input:focus, select:focus{
      border-color:#8c5a3a;
      outline:none;
      box-shadow:0 0 0 2px rgba(140,90,58,0.25);
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0 10px;
      margin-top:12px;
    }

    thead th{
      font-size:14px;
      text-transform:uppercase;
      letter-spacing:0.6px;
      color:#6d6158;
      padding-bottom:10px;
    }

    tbody tr{
      background:#ffffff;
      box-shadow:0 4px 14px rgba(0,0,0,0.06);
      border-radius:12px;
      overflow:hidden;
    }

    td{
      padding:14px 16px;
      font-size:15px;
      border-bottom:1px solid #f0ece8;
    }

    tbody tr:last-child td { border-bottom:none }

    img{
      height:60px;
      width:60px;
      object-fit:cover;
      border-radius:10px;
      border:1px solid #eee2d8;
    }

    .small{
      margin-top:20px;
      font-size:13px;
      color:#7a736e;
      background:#faf7f3;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid #e8e2dc;
    }
  </style>
</head>

<body>
<div class="wrap">

  <div class="nav">
    <a th:href="@{/admin/categories}">Категории</a>
    <a th:href="@{/admin/items}">Позиции</a>
    <a th:href="@{/}">На сайт</a>

    <form th:action="@{/logout}" method="post">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
      <button type="submit"
              style="background:#e53e3e;color:#fff;border:0;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:700">
        Выйти
      </button>
    </form>
  </div>

  <h1>Categories</h1>

  <form action="/admin/categories/add" method="post" enctype="multipart/form-data" class="form-inline">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <input type="text" name="name" placeholder="Name" required>
    <select name="language">
      <option value="ru">ru</option>
      <option value="en">en</option>
    </select>
    <input type="file" name="image" accept="image/*">
    <button type="submit">Add</button>
  </form>

  <table>
    <thead>
    <tr><th>ID</th><th>Name</th><th>Lang</th><th>Image</th><th>Action</th></tr>
    </thead>

    <tbody>
    <tr th:each="c : ${categories}">
      <td th:text="${c.id}"></td>
      <td th:text="${c.name}"></td>
      <td th:text="${c.language}"></td>
      <td>
        <img th:if="${c.imageFilename} != null" th:src="@{'/uploads/' + ${c.imageFilename}}">
      </td>
      <td>
        <form th:action="@{'/admin/categories/' + ${c.id} + '/delete'}" method="post" style="display:inline">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <div class="small">
    Примечание: изображения сохраняются в директорию uploads (сразу после перехода из корня проекта)
  </div>

</div>
</body>
</html>
